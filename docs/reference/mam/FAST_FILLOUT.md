# JSON Fast Fillout

JSON string for upload/request form filling.

This is the specification for the JSON object used to fill the form for making a new request or the torrent upload page. This is the official schema from the [MAM API Wiki](https://www.myanonamouse.net/).

**Leave off any fields you don't need/want to fill out.**

## Generating MAM Fast-Fill JSON with MAMFast

MAMFast includes a built-in tool to automatically generate this JSON for your releases:

```bash
mamfast tools mamff /path/to/release/folder
mamfast tools mamff /path/to/book.m4b
mamfast tools mamff ./folder --output ./custom.json
```

This command:

1. Extracts ASIN from folder/file name
2. Fetches Audnex metadata (title, author, narrators, genres, etc.)
3. Fetches Audnex chapter data for accurate chapter information
4. Runs MediaInfo on the audio file to extract audio specifications
5. Generates the MAM JSON with formatted BBCode description

The generated JSON file is saved with the same name as the torrent, but with `.json` extension.

### Implementation Modules

The JSON generation pipeline uses these key modules:

- **`mamfast.commands.tools.cmd_tools_mamff()`** - CLI command handler for `mamfast tools mamff`
- **`mamfast.metadata.build_mam_json()`** - Core function that builds the complete MAM JSON dict from `AudiobookRelease` metadata
- **`mamfast.metadata.render_bbcode_description()`** - Renders BBCode-formatted description with book summary and audio specifications
- **`mamfast.metadata.save_mam_json()`** - Writes JSON to file with proper file ownership
- **`mamfast.metadata.generate_mam_json_for_release()`** - High-level wrapper that orchestrates the full generation flow
- **`mamfast.metadata._html_to_bbcode()`** - Converts HTML tags from Audnex to BBCode format
- **`mamfast.metadata._map_genres_to_categories()`** - Maps Audnex genres to MAM numeric category IDs
- **`mamfast.metadata._get_audiobook_category()`** - Gets human-readable category string from genres
- **`mamfast.config.CategoriesConfig`** - Holds category/audiobook category mappings loaded from config files
- **`mamfast.models.AudiobookRelease`** - Data model holding release metadata (title, authors, ASIN, etc.)

## Parameters

| Parameter | Data type | Additional information |
| ----------- | ----------- | ----------------------- |
| authors | list | List of strings of author names |
| categories | list | List of category numbers (newer multi category). See: <https://www.myanonamouse.net/tor/json/categories.php?new> |
| category | string or int | The string name or int id of the category |
| description | string | The string for the description. For requests this is the "book description". Supports BBCode formatting (`[b]`, `[i]`, `[color]`, `[size]`, etc.). MAMFast automatically converts HTML from Audnex to BBCode. |
| flags | list of strings | List of the flags to check off. As of writing, you can use: `"cLang"` for Crude Language, `"vio"` for violence, `"sSex"` for Some Explicit Sexual Content, `"eSex"` for Explicit Sexual Content, `"abridged"` for Abridged content, `"lgbt"` for LGBTQ+ themed content |
| isbn | string | Fills in the ISBN field |
| language | string or int | The name or int id of the language |
| main_cat | int | Whether the item is: `1` => Fiction, `2` => Non-Fiction |
| mediaInfo | string | The mediaInfo for the audio component of a torrent |
| mediaType | int | The int for which media type the torrent is. See: <https://www.myanonamouse.net/tor/json/categories.php?new> |
| narrator | list | List of strings of narrator names |
| series | list | List of objects with the following keys: `name` (string), `number` (string - the number(s) in the series included) |
| subtitle | string | Subtitle of the book |
| tags | string | String to put into the tags |
| thumbnail | string | URL for the image to be used as the poster |
| title | string | String of the title of the item |

## Example Input

```json
{
  "title": "Torrent title goes here",
  "authors": [
    "author #1",
    "author #2"
  ],
  "narrators": [
    "narrator #1",
    "narrator #2"
  ],
  "tags": "Tags & Labels go here",
  "description": "Torrent description goes here",
  "series": [
    {
      "name": "First series name goes here",
      "number": 3
    },
    {
      "name": "Second series name goes here",
      "number": "1-3"
    }
  ],
  "subtitle": "Torrent subtitle goes here",
  "thumbnail": "URL for the poster image goes here",
  "language": "French",
  "category": "Ebooks - Art"
}
```

## MAMFast Output Example

When generated by MAMFast, the JSON includes additional fields populated from Audnex metadata and MediaInfo:

```json
{
  "title": "The Way of Kings",
  "subtitle": "A Stormlight Archive Novel",
  "authors": ["Brandon Sanderson"],
  "narrators": ["Michael Kramer", "Kate Reading"],
  "series": [
    {
      "name": "The Stormlight Archive",
      "number": "1"
    }
  ],
  "description": "[center][size=6][b][color=#3aa6ff]The Way of Kings[/color][/b][/size][/center]\n\n[b]Unabridged[/b]\n\nI will protect those who cannot protect themselves...",
  "thumbnail": "https://m.media-amazon.com/images/I/...",
  "language": "English",
  "categories": [44],
  "main_cat": 1,
  "mediaType": 1,
  "tags": "Length: 45h 29m | Release date: 08-31-10 | Format: M4B, AAC LC | Chapterized |",
  "mediaInfo": "General\\nComplete name: ...",
  "isbn": "ASIN:B003ZWFO7E",
  "flags": []
}
```

### Notes on MAMFast Output

- **description**: Automatically formatted with BBCode, includes book summary from Audnex, and audio format/chapter details from MediaInfo
- **isbn**: Populated with `ASIN:<asin>` format (e.g., `ASIN:B003ZWFO7E`)
- **main_cat**: Inferred from Audnex `literatureType` (1 = Fiction, 2 = Non-Fiction)
- **categories**: Mapped from Audnex genres using `config/categories.json`
- **category**: Human-readable string like "Audiobooks - Fantasy" using `config/audiobook_categories.json`
- **mediaType**: Always set to 1 (Audiobook) for audiobook releases
- **flags**: Automatically detected for explicit content (`eSex`) and abridged format
- **tags**: Includes runtime, release date, audio format, and chapterization status

## Reference Data

### Categories

Categories that can be used for `category` or `categories` fields. Categories have `main_type_ids` (Fiction=1, Nonfiction=2) and `media_type_ids` (Audiobook=1, Ebook=2, Musicology=3, Radio=4, Manga=5, Comic=6, Periodical Ebook=7, Periodical Audiobook=8).

| ID | Name | Main Types | Media Types |
| --- | --- | --- | --- |
| 48 | Accompanying music | Nonfiction | Musicology |
| 1 | Action/Adventure | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 2 | Art/Photography | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 3 | Biographical | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 4 | Business/Money | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 5 | Comedy | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic |
| 6 | Complete Editions - Music | Nonfiction | Musicology |
| 7 | Computer/Internet | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 59 | Contemporary Fiction | Fiction | Audiobook, Ebook, Radio |
| 8 | Crafts | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 9 | Crime | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 60 | Drama/Plays | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic |
| 10 | Dramatization/Full Cast | Fiction, Nonfiction | Audiobook, Radio |
| 11 | Education/Textbook | Nonfiction | Audiobook, Ebook |
| 12 | Factual News/Current Events | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 13 | Fantasy | Fiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 14 | Food/Wine | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 15 | Guitar/Bass Tabs | Nonfiction | Musicology |
| 16 | Health/Fitness/Diet | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 17 | Historical | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 18 | Home/Garden | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 19 | Horror | Fiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 20 | Humor | Fiction, Nonfiction | Audiobook, Ebook, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 21 | Individual Sheet | Nonfiction | Musicology |
| 22 | Instructional | Nonfiction | Audiobook, Ebook, Musicology, Radio, Periodical Ebook, Periodical Audiobook |
| 23 | Juvenile | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 24 | Language | Nonfiction | Audiobook, Ebook |
| 25 | LGBTQIA+ | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 26 | Lick Library - LTP/Jam With | Nonfiction | Musicology |
| 27 | Lick Library - Techniques/QL | Nonfiction | Musicology |
| 28 | Literary Classics | Fiction | Audiobook, Ebook, Radio |
| 57 | Literary Fiction | Fiction | Audiobook, Ebook, Radio |
| 29 | LitRPG | Fiction | Audiobook, Ebook, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 30 | Math | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 31 | Medicine/Psychology | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 32 | Music | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 33 | Music Book | Nonfiction | Musicology |
| 34 | Mystery | Fiction | Audiobook, Ebook, Radio, Manga, Comic |
| 35 | Nature | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 36 | Paranormal | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 37 | Philosophy | Nonfiction | Audiobook, Ebook |
| 38 | Poetry | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 39 | Politics/Sociology | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 58 | Progression Fantasy | Fiction | Audiobook, Ebook, Manga, Comic |
| 40 | Reference | Fiction, Nonfiction | Audiobook, Ebook, Periodical Ebook, Periodical Audiobook |
| 41 | Religion/Spirituality | Fiction, Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 42 | Romance | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 43 | RPG | Fiction | Audiobook, Ebook, Periodical Ebook, Periodical Audiobook |
| 44 | Science | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 45 | Science Fiction | Fiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 46 | Self-Help | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 47 | Sheet Collection | Nonfiction | Musicology |
| 49 | Sports/Hobbies | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 56 | Superheroes | Fiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 50 | Technology | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 51 | Thriller/Suspense | Fiction | Audiobook, Ebook, Radio, Manga, Comic |
| 52 | Travel | Nonfiction | Audiobook, Ebook, Radio, Periodical Ebook, Periodical Audiobook |
| 53 | Urban Fantasy | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |
| 54 | Western | Fiction | Audiobook, Ebook, Radio, Manga, Comic |
| 55 | Young Adult | Fiction, Nonfiction | Audiobook, Ebook, Radio, Manga, Comic, Periodical Ebook, Periodical Audiobook |

### Media Types

| ID | Name | Icon |
| --- | --- | --- |
| 1 | Audiobook | /pic/mediaType/site_default/Audiobook.png |
| 2 | Ebook | /pic/mediaType/site_default/EBook.png |
| 3 | Musicology | /pic/mediaType/site_default/Music.png |
| 4 | Radio | /pic/mediaType/site_default/Radio.png |
| 5 | Manga | /pic/mediaType/site_default/Manga.png |
| 6 | Comic Book / Graphic Novel | /pic/mediaType/site_default/Comics.png |
| 7 | Periodical Ebook | /pic/mediaType/site_default/Periodicals.png |
| 8 | Periodical Audiobook | /pic/mediaType/site_default/PeriodicalsAudio.png |

### Main Types

| ID | Name |
| --- | --- |
| 1 | Fiction |
| 2 | Nonfiction |

### Languages

| ID | Name | Code |
| --- | --- | --- |
| 1 | English | ENG |
| 2 | Chinese | CHI |
| 3 | Gujarati | GUJ |
| 4 | Spanish | SPA |
| 5 | Kannada | KAN |
| 6 | Burmese | MYA |
| 7 | Thai | THA |
| 8 | Hindi | HIN |
| 9 | Marathi | MAR |
| 10 | Telugu | TEL |
| 11 | Tamil | TAM |
| 12 | Javanese | JAV |
| 13 | Vietnamese | VIE |
| 14 | Punjabi | PAN |
| 15 | Urdu | URD |
| 16 | Russian | RUS |
| 17 | Afrikaans | AFR |
| 18 | Bulgarian | BUL |
| 19 | Catalan | CAT |
| 20 | Czech | CZE |
| 21 | Danish | DAN |
| 22 | Dutch | DUT |
| 23 | Finnish | FIN |
| 24 | Scottish Gaelic | GLA |
| 25 | Ukrainian | UKR |
| 26 | Greek | GRE |
| 27 | Hebrew | HEB |
| 28 | Hungarian | HUN |
| 29 | Tagalog | TGL |
| 30 | Romanian | ROM |
| 31 | Serbian | SRP |
| 32 | Arabic | ARA |
| 33 | Malay | MSA |
| 34 | Portuguese | POR |
| 35 | Bengali | BEN |
| 36 | French | FRE |
| 37 | German | GER |
| 38 | Japanese | JPN |
| 39 | Farsi | FAS |
| 40 | Swedish | SWE |
| 41 | Korean | KOR |
| 42 | Turkish | TUR |
| 43 | Italian | ITA |
| 44 | Cantonese | YUE |
| 45 | Polish | POL |
| 46 | Latin | LAT |
| 47 | Other | ??? |
| 48 | Norwegian | NOR |
| 49 | Croatian | HRV |
| 50 | Lithuanian | LIT |
| 51 | Bosnian | BOS |
| 52 | Brazilian Portuguese (BP) | POR |
| 53 | Indonesian | IND |
| 54 | Slovenian | SLV |
| 55 | Castilian Spanish | SPA |
| 56 | Irish | GLE |
| 57 | Manx | GLV |
| 58 | Malayalam | MAL |
| 59 | Greek, Ancient | GRC |
| 60 | Sanskrit | SAN |
| 61 | Estonian | EST |
| 62 | Latvian | LAV |
| 63 | Icelandic | ICE |

## MAMFast Configuration

When generating JSON with MAMFast, several configuration files control how fields are populated:

### `config/categories.json`

Maps Audnex genre names to MAM numeric category IDs. Example:

```json
{
  "fantasy": 13,
  "science fiction": 45,
  "mystery": 34,
  "romance": 42,
  "horror": 19,
  "_comment": "Maps Audnex genre names to MAM category IDs"
}
```

### `config/audiobook_categories.json`

Maps genre keywords to human-readable MAM audiobook category strings for both fiction and non-fiction. Supports separate mappings for each:

```json
{
  "fiction": {
    "urban fantasy": "Audiobooks - Urban Fantasy",
    "fantasy": "Audiobooks - Fantasy",
    "science fiction": "Audiobooks - Science Fiction"
  },
  "nonfiction": {
    "biography": "Audiobooks - Biographical",
    "history": "Audiobooks - Historical",
    "self-help": "Audiobooks - Self-Help"
  },
  "defaults": {
    "fiction": "Audiobooks - Fiction",
    "nonfiction": "Audiobooks - Non-Fiction"
  }
}
```

### Metadata Sources

The generated JSON pulls from:

- **Audnex API**: title, subtitle, authors, narrators, series, description (HTML â†’ BBCode), genres, image URL, language, format type (abridged), adult content flag
- **MediaInfo**: runtime duration, audio codec, bitrate, sample rate, channel configuration, chapters
- **ASIN**: Extracted from folder/file name and populated as ISBN field

### Notes

- Empty or unpopulated fields are typically omitted from the generated JSON
- The `description` field is extensively formatted with BBCode including colored titles, book summary, and media specifications
- Series numbers can be strings (supporting ranges like "1-3") or integers
- Multi-narrator audiobooks include all narrators in the JSON
